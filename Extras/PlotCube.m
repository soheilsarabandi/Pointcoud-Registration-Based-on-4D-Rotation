function PlotCube(edges, origin, alpha, clr)
%
%  This function displays a 3D-cube in the current axes with the following
%  arguments
%
%  edges : 3-elements vector that defines the length of cube edges
%  origin: 3-elements vector that defines the start point of the cube
%  alpha : scalar that defines the transparency of the cube faces (from 0
%          to 1)
%  color : 3-elements vector that defines the faces color of the cube
%
%  Example: PlotCube([5 5 5],[ 2  2  2],.8,[1 0 0]);
% 

XYZ = { ...
  [0 0 0 0]  [0 0 1 1]  [0 1 1 0] ; ...
  [1 1 1 1]  [0 0 1 1]  [0 1 1 0] ; ...
  [0 1 1 0]  [0 0 0 0]  [0 0 1 1] ; ...
  [0 1 1 0]  [1 1 1 1]  [0 0 1 1] ; ...
  [0 1 1 0]  [0 0 1 1]  [0 0 0 0] ; ...
  [0 1 1 0]  [0 0 1 1]  [1 1 1 1]   ...
  };

XYZ = mat2cell( cellfun( @(x,y,z) x*y+z , XYZ , ...
    repmat(mat2cell(edges,1,[1 1 1]),6,1) , ...
    repmat(mat2cell(origin,1,[1 1 1]),6,1) , ...
    'UniformOutput',false), 6,[1 1 1]);

cellfun(@patch,XYZ{1},XYZ{2},XYZ{3},...
  repmat({clr},6,1),...
  repmat({'FaceAlpha'},6,1),...
  repmat({alpha},6,1));

end
